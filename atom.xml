<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>歸海.</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-01-14T13:34:35.375Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Yi</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Rclone+OneDrive+Aria2</title>
    <link href="http://example.com/2022/01/14/%E7%94%A8Aria+AriaNg+OneDrive+Rclone%E5%81%9A%E8%B5%84%E6%BA%90%E7%9B%98/"/>
    <id>http://example.com/2022/01/14/%E7%94%A8Aria+AriaNg+OneDrive+Rclone%E5%81%9A%E8%B5%84%E6%BA%90%E7%9B%98/</id>
    <published>2022-01-14T10:16:28.000Z</published>
    <updated>2022-01-14T13:34:35.375Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p><a href="https://baike.baidu.com/item/OneDrive">Microsoft OneDrive</a> 就是微软的云盘，一般都知道这玩意<br><a href="http://aria2.baisheng999.com/">Aria2</a> 这个知道的人稍微偏少，主要是命令行的一个下载工具，和<a href="https://baike.baidu.com/item/wget/">Wget</a>类似的工具，但又比wget下载协议多比如种子磁力链接<br><a href="https://rclone.org/">Rclone</a>知道这个的就真的少之又少了，百度百科都没收录，官网介绍如下</p><pre><code>Rclone is a command line program to manage files on cloud storage. It is a feature rich alternative to cloud vendors&#39; web storage interfaces. Over 40 cloud storage products support rclone including S3 object stores, business &amp; consumer file storage services, as well as standard transfer protocols.Rclone是一个命令行程序来管理云存储上的文件。这是一个功能丰富的选择云供应商的网络存储接口。超过40岁的云存储产品支持rclone包括S3对象商店,商业和消费者的文件存储服务,以及标准的传输协议。</code></pre><p>讲通俗点就是把网盘挂载到本地xx文件夹里便于操作</p><h3 id="Aria2"><a href="#Aria2" class="headerlink" title="Aria2"></a>Aria2</h3><p>本文使用Termux + Alpine环境进行实战，与其他linux发行版相差不大</p><p>在安装配置好的alpine os内安装Aria2并没有什么难度，无非就是使用apk包管理进行</p><pre class=" language-bash"><code class="language-bash">apk add aria2</code></pre><p>然后就可以通过下面这段进行下载文件</p><pre class=" language-bash"><code class="language-bash">aria2c <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;url&amp;#125; </span></code></pre><p>不过这样也只能下载http协议的文件，也只能通过命令行执行，没有一个漂亮的UI，而且功能不算强大我不要，所以接下来要创建Aria2的配置和UI<br>首先进入 <code>/etc</code> 文件夹  <code>ls</code> 查看是否有 <code>aria2</code> 文件夹，没用就创建</p><pre class=" language-bash"><code class="language-bash"><span class="token function">mkdir</span> /etc/aria2</code></pre><p>然后创建</p><pre class=" language-bash"><code class="language-bash"><span class="token function">touch</span> /etc/aria2/aria2.conf <span class="token comment" spellcheck="true">#配置文件</span><span class="token function">touch</span> /etc/aria2/aria2.session <span class="token comment" spellcheck="true">#下载记录文件</span><span class="token function">touch</span> /etc/aria2/dht.dat <span class="token comment" spellcheck="true">#ipv4网络节点数据</span><span class="token function">touch</span> /etc/aria2/dht6.dat <span class="token comment" spellcheck="true">#ipv6</span></code></pre><p>把下面配置写进<code>/etc/aria2/aria2.conf </code>里</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 设置的RPC授权令牌, 取代 --rpc-user 和 --rpc-passwd 选项</span><span class="token comment" spellcheck="true"># token可以自己随意设置</span>rpc-secret<span class="token operator">=</span>删掉文字，输入一串代表密码的字符<span class="token comment" spellcheck="true"># 下面是ssl证书，可以先不管</span><span class="token comment" spellcheck="true">#rpc-private-key=/etc/aria2/server.key</span><span class="token comment" spellcheck="true">#rpc-certificate=/etc/aria2/server.crt</span><span class="token comment" spellcheck="true">#允许rpc</span>enable-rpc<span class="token operator">=</span>true<span class="token comment" spellcheck="true">#允许所有来源, web界面跨域权限需要</span>rpc-allow-origin-all<span class="token operator">=</span>true<span class="token comment" spellcheck="true">#允许外部访问，false的话只监听本地端口</span>rpc-listen-all<span class="token operator">=</span>true<span class="token comment" spellcheck="true">#RPC端口, 仅当默认端口被占用时修改</span>rpc-listen-port<span class="token operator">=</span>6800<span class="token comment" spellcheck="true">#文件保存路径, 默认为当前启动位置</span>dir<span class="token operator">=</span>/root/downloads/<span class="token comment" spellcheck="true">#从会话文件中读取下载任务</span>input-file<span class="token operator">=</span>/etc/aria2/aria2.session<span class="token comment" spellcheck="true">#在Aria2退出时保存`错误/未完成`的下载任务到会话文件</span>save-session<span class="token operator">=</span>/etc/aria2/aria2.session<span class="token comment" spellcheck="true">#定时保存会话, 0为退出时才保存, 需1.16.1以上版本, 默认:0</span><span class="token comment" spellcheck="true">#save-session-interval=60</span>force-save<span class="token operator">=</span>true<span class="token comment" spellcheck="true">#log=/aria2log</span><span class="token comment" spellcheck="true">#log-level=error</span><span class="token comment" spellcheck="true">#最大同时下载数(任务数), 路由建议值: 3</span>max-concurrent-downloads<span class="token operator">=</span>5<span class="token comment" spellcheck="true">#断点续传</span>continue<span class="token operator">=</span>true<span class="token comment" spellcheck="true">#同服务器连接数</span>max-connection-per-server<span class="token operator">=</span>5<span class="token comment" spellcheck="true">#最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要</span>min-split-size<span class="token operator">=</span>10M<span class="token comment" spellcheck="true">#单文件最大线程数, 路由建议值: 5</span>split<span class="token operator">=</span>10<span class="token comment" spellcheck="true">#下载速度限制</span>max-overall-download-limit<span class="token operator">=</span>0<span class="token comment" spellcheck="true">#单文件速度限制</span>max-download-limit<span class="token operator">=</span>0<span class="token comment" spellcheck="true">#上传速度限制</span>max-overall-upload-limit<span class="token operator">=</span>0<span class="token comment" spellcheck="true">#单文件速度限制</span>max-upload-limit<span class="token operator">=</span>0<span class="token comment" spellcheck="true">#断开速度过慢的连接</span><span class="token comment" spellcheck="true">#lowest-speed-limit=0</span><span class="token comment" spellcheck="true">#文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本</span><span class="token comment" spellcheck="true">#disk-cache=0</span><span class="token comment" spellcheck="true">#另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)</span><span class="token comment" spellcheck="true">#enable-mmap=true</span><span class="token comment" spellcheck="true">#文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长</span><span class="token comment" spellcheck="true">#NTFS建议使用falloc, EXT3/4建议trunc, MAC 下需要注释此项所需时间 </span><span class="token comment" spellcheck="true">#none &lt; falloc ? trunc &lt;&lt; prealloc, falloc和trunc需要文件系统和内核支持</span>file-allocation<span class="token operator">=</span>prealloc<span class="token comment" spellcheck="true"># DHT（IPv4）文件</span>dht-file-path<span class="token operator">=</span>/etc/aria2/dht.dat<span class="token comment" spellcheck="true"># # DHT（IPv6）文件</span>dht-file-path6<span class="token operator">=</span>/etc/aria2/dht6.dat<span class="token comment" spellcheck="true"># # 打开DHT功能, PT需要禁用, 默认:true</span><span class="token comment" spellcheck="true"># enable-dht=true</span><span class="token comment" spellcheck="true"># # 打开IPv6 DHT功能, PT需要禁用</span>enable-dht6<span class="token operator">=</span>true<span class="token comment" spellcheck="true"># # DHT网络监听端口, 默认:6881-6999</span>dht-listen-port<span class="token operator">=</span>6881-6999<span class="token comment" spellcheck="true"># # 本地节点查找, PT需要禁用, 默认:false</span>bt-enable-lpd<span class="token operator">=</span>true<span class="token comment" spellcheck="true"># # 种子交换, PT需要禁用, 默认:true</span>enable-peer-exchange<span class="token operator">=</span>true<span class="token comment" spellcheck="true">#种子服务器地址，announce后面有个,号隔开</span>bt-tracker<span class="token operator">=</span>udp://open.tracker.cl:1337/announce,udp://tracker.opentrackr.org:1337/announce,http://tracker.opentrackr.org:1337/announce,udp://9.rarbg.com:2810/announce,udp://tracker.openbittorrent.com:6969/announce</code></pre><p><code>bt-tracker=</code>有时候需要更新地址，可以在<a href="https://github.com/ngosang/trackerslist/blob/master/trackers_all.txt">trackerslist</a>里复制，划分好加入aria2.conf里。<br>官方的AriaNg <a href="http://ariang.mayswind.net/latest/#!/downloading">Dome</a><br>我放Gitee的 <a href="http://yits.gitee.io/aria">Dome</a></p><p>你也可以自己搭建本地的用<a href="http://ariang.mayswind.net/zh_Hans/">Ariang</a>下载Web文件，解压Web根目录下面，启动网页服务后打开浏览器，这里不会可以看我其他文章。</p><p>在左边 <code>侧边栏&gt;AriaNg 设置&gt;Aria PRC 密钥</code> 输入上面自己设置的字符串，刷新网页就可以看到，aria2状态是已连接了，有时间的话你可以尝试下载一些比较热门的磁力链接文件预热一下dht.dat文件，这里推荐一个好用的磁力搜索引擎<a href="https://search.btfox.pw/">磁力狐</a>一般电影什么的都可以找到资源，但是一个视频就好几个G存自己设备上好像太浪费了，一般看完就得删了，下次看还得找磁力继续下载太麻烦。</p><h3 id="Microsoft-OneDrive"><a href="#Microsoft-OneDrive" class="headerlink" title="Microsoft OneDrive"></a>Microsoft OneDrive</h3><p>上网看了一下Microsoft OneDrive可以便宜薅到5T空间的账号四舍五入对于不要钱。这里就不放教程了，可以淘宝买，也可以另寻它路，个人账号的话只有5G的免费空间。注册好后开始安装和配置Rclone</p><h3 id="Rclone-需要Root权限才能挂载"><a href="#Rclone-需要Root权限才能挂载" class="headerlink" title="Rclone 需要Root权限才能挂载"></a>Rclone 需要Root权限才能挂载</h3><p>我都是在Termux安装和挂载云盘到rootfs里的mnt文件夹里才启动proot容器，在容器里好像挂载不了。</p><pre class=" language-bash"><code class="language-bash">pkg <span class="token function">install</span> rclone tsurclone configCurrent remotes:e<span class="token punctuation">)</span> Edit existing remoten<span class="token punctuation">)</span> New remoted<span class="token punctuation">)</span> Delete remoter<span class="token punctuation">)</span> Rename remotec<span class="token punctuation">)</span> Copy remotes<span class="token punctuation">)</span> Set configuration passwordq<span class="token punctuation">)</span> Quit confige/n/d/r/c/s/q<span class="token operator">></span> n                          //第二步输入n创建新的配置name<span class="token operator">></span> 挂载网盘的名称（任意写，中间不能有空格）Option Storage.Type of storage to configure.Enter a string value. Press Enter <span class="token keyword">for</span> the default <span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>.Choose a number from below, or <span class="token function">type</span> <span class="token keyword">in</span> your own value. 1 / 1Fichier   \ <span class="token string">"fichier"</span> 2 / Alias <span class="token keyword">for</span> an existing remote   \ <span class="token string">"alias"</span> 3 / Amazon Drive   \ <span class="token string">"amazon cloud drive"</span> 4 / Amazon S3 Compliant Storage Providers including AWS, Alibaba, Ceph, Digital Ocean, Dreamhost, IBM COS, Minio, SeaweedFS, and Tencent COS   \ <span class="token string">"s3"</span> 5 / Backblaze B2   \ <span class="token string">"b2"</span> 6 / Better checksums <span class="token keyword">for</span> other remotes   \ <span class="token string">"hasher"</span> 7 / Box   \ <span class="token string">"box"</span> 8 / Cache a remote   \ <span class="token string">"cache"</span> 9 / Citrix Sharefile   \ <span class="token string">"sharefile"</span>10 / Compress a remote   \ <span class="token string">"compress"</span>11 / Dropbox   \ <span class="token string">"dropbox"</span>12 / Encrypt/Decrypt a remote   \ <span class="token string">"crypt"</span>13 / Enterprise File Fabric   \ <span class="token string">"filefabric"</span>14 / FTP Connection   \ <span class="token string">"ftp"</span>15 / Google Cloud Storage <span class="token punctuation">(</span>this is not Google Drive<span class="token punctuation">)</span>   \ <span class="token string">"google cloud storage"</span>16 / Google Drive   \ <span class="token string">"drive"</span>17 / Google Photos   \ <span class="token string">"google photos"</span>18 / Hadoop distributed <span class="token function">file</span> system   \ <span class="token string">"hdfs"</span>19 / Hubic   \ <span class="token string">"hubic"</span>20 / In memory object storage system.   \ <span class="token string">"memory"</span>21 / Jottacloud   \ <span class="token string">"jottacloud"</span>22 / Koofr   \ <span class="token string">"koofr"</span>23 / Local Disk   \ <span class="token string">"local"</span>24 / Mail.ru Cloud   \ <span class="token string">"mailru"</span>25 / Mega   \ <span class="token string">"mega"</span>26 / Microsoft Azure Blob Storage   \ <span class="token string">"azureblob"</span>27 / Microsoft OneDrive   \ <span class="token string">"onedrive"</span>28 / OpenDrive   \ <span class="token string">"opendrive"</span>29 / OpenStack Swift <span class="token punctuation">(</span>Rackspace Cloud Files, Memset Memstore, OVH<span class="token punctuation">)</span>   \ <span class="token string">"swift"</span>30 / Pcloud   \ <span class="token string">"pcloud"</span>31 / Put.io   \ <span class="token string">"putio"</span>32 / QingCloud Object Storage   \ <span class="token string">"qingstor"</span>33 / SSH/SFTP Connection   \ <span class="token string">"sftp"</span>34 / Sia Decentralized Cloud   \ <span class="token string">"sia"</span>35 / Sugarsync   \ <span class="token string">"sugarsync"</span>36 / Tardigrade Decentralized Cloud Storage   \ <span class="token string">"tardigrade"</span>37 / Transparently chunk/split large files   \ <span class="token string">"chunker"</span>38 / Union merges the contents of several upstream fs   \ <span class="token string">"union"</span>39 / Uptobox   \ <span class="token string">"uptobox"</span>40 / Webdav   \ <span class="token string">"webdav"</span>41 / Yandex Disk   \ <span class="token string">"yandex"</span>42 / Zoho   \ <span class="token string">"zoho"</span>43 / http Connection   \ <span class="token string">"http"</span>44 / premiumize.me   \ <span class="token string">"premiumizeme"</span>45 / seafile   \ <span class="token string">"seafile"</span>Storage<span class="token operator">></span>27<span class="token comment" spellcheck="true">#这里选27Microsoft OneDrive 回车</span>Option client_id.OAuth Client Id.Leave blank normally.Enter a string value. Press Enter <span class="token keyword">for</span> the default <span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>.client_id<span class="token operator">></span><span class="token comment" spellcheck="true">#这里不填，直接回车</span>OAuth Client Secret.Leave blank normally.Enter a string value. Press Enter <span class="token keyword">for</span> the default <span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>.client_secret<span class="token operator">></span><span class="token comment" spellcheck="true">#不填，继续回车</span>Option region.Choose national cloud region <span class="token keyword">for</span> OneDrive.Enter a string value. Press Enter <span class="token keyword">for</span> the default <span class="token punctuation">(</span><span class="token string">"global"</span><span class="token punctuation">)</span>.Choose a number from below, or <span class="token function">type</span> <span class="token keyword">in</span> your own value. 1 / Microsoft Cloud Global   \ <span class="token string">"global"</span> 2 / Microsoft Cloud <span class="token keyword">for</span> US Government   \ <span class="token string">"us"</span> 3 / Microsoft Cloud Germany   \ <span class="token string">"de"</span> 4 / Azure and Office 365 operated by 21Vianet <span class="token keyword">in</span> China   \ <span class="token string">"cn"</span>region<span class="token operator">></span>1<span class="token comment" spellcheck="true">#选序号1 global全球</span>Edit advanced config?y<span class="token punctuation">)</span> Yesn<span class="token punctuation">)</span> No <span class="token punctuation">(</span>default<span class="token punctuation">)</span>y/n<span class="token operator">></span>n<span class="token comment" spellcheck="true">#不进行高级配置，选择no默认配置即可</span>Use auto config? * Say Y <span class="token keyword">if</span> not sure * Say N <span class="token keyword">if</span> you are working on a remote or headless machiney<span class="token punctuation">)</span> Yes <span class="token punctuation">(</span>default<span class="token punctuation">)</span>n<span class="token punctuation">)</span> Noy/n<span class="token operator">></span>y<span class="token comment" spellcheck="true">#继续默认配置</span>2022/01/14 05:01:39 NOTICE: If your browser doesn't <span class="token function">open</span> automatically go to the following link: http://127.0.0.1:53682/auth?state<span class="token operator">=</span>rI*wUG***1J*nGr*L**S*w2022/01/14 05:01:39 NOTICE: Log <span class="token keyword">in</span> and authorize rclone <span class="token keyword">for</span> access2022/01/14 05:01:39 NOTICE: Waiting <span class="token keyword">for</span> code<span class="token punctuation">..</span>.2022/01/14 05:01:44 NOTICE: Got code<span class="token comment" spellcheck="true">#到这里会跳转到浏览器，或者手动复制链接到浏览器登入，登入完成会在浏览器显示</span><span class="token comment" spellcheck="true">#Success!</span><span class="token comment" spellcheck="true">#All done. Please go back to rclone.</span><span class="token comment" spellcheck="true">#再返回终端</span>Option config_type.Type of connectionEnter a string value. Press Enter <span class="token keyword">for</span> the default <span class="token punctuation">(</span><span class="token string">"onedrive"</span><span class="token punctuation">)</span>.Choose a number from below, or <span class="token function">type</span> <span class="token keyword">in</span> an existing value. 1 / OneDrive Personal or Business   \ <span class="token string">"onedrive"</span> 2 / Root Sharepoint site   \ <span class="token string">"sharepoint"</span>   / Sharepoint site name or URL 3 <span class="token operator">|</span> E.g. mysite or https://contoso.sharepoint.com/sites/mysite   \ <span class="token string">"url"</span> 4 / Search <span class="token keyword">for</span> a Sharepoint site   \ <span class="token string">"search"</span> 5 / Type <span class="token keyword">in</span> driveID <span class="token punctuation">(</span>advanced<span class="token punctuation">)</span>   \ <span class="token string">"driveid"</span> 6 / Type <span class="token keyword">in</span> SiteID <span class="token punctuation">(</span>advanced<span class="token punctuation">)</span>   \ <span class="token string">"siteid"</span>   / Sharepoint server-relative path <span class="token punctuation">(</span>advanced<span class="token punctuation">)</span> 7 <span class="token operator">|</span> E.g. /teams/hr   \ <span class="token string">"path"</span>config_type<span class="token operator">></span>1<span class="token comment" spellcheck="true">#选择序号1</span>Drive OK?Found drive <span class="token string">"root"</span> of <span class="token function">type</span> <span class="token string">"business"</span>URL: https://ssxx-my.sharepoint.com/personal/yist_od_yam_ink/Documentsy<span class="token punctuation">)</span> Yes <span class="token punctuation">(</span>default<span class="token punctuation">)</span>n<span class="token punctuation">)</span> Noy/n<span class="token operator">></span>y<span class="token comment" spellcheck="true">#y 默认</span>--------------------<span class="token punctuation">[</span>1<span class="token punctuation">]</span><span class="token function">type</span> <span class="token operator">=</span> onedrivetoken <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;"access_token":"*************","expiry":"2022-01-14T00:08:19.327666693Z"&amp;#125;</span>drive_id <span class="token operator">=</span> b<span class="token operator">!</span>x**qko**ek-h*KRj*5*bV*D*W0mZ9*ZHq*K94i*jT**ZU*z*S*E*TaIDN**G3**adrive_type <span class="token operator">=</span> business--------------------y<span class="token punctuation">)</span> Yes this is OK <span class="token punctuation">(</span>default<span class="token punctuation">)</span>e<span class="token punctuation">)</span> Edit this remoted<span class="token punctuation">)</span> Delete this remotey/e/d<span class="token operator">></span><span class="token comment" spellcheck="true">#y 默认</span>Current remotes:Name                 Type<span class="token operator">==</span><span class="token operator">==</span>                 <span class="token operator">==</span><span class="token operator">==</span>Microsoft OneDrive   onedrivee<span class="token punctuation">)</span> Edit existing remoten<span class="token punctuation">)</span> New remoted<span class="token punctuation">)</span> Delete remoter<span class="token punctuation">)</span> Rename remotec<span class="token punctuation">)</span> Copy remotes<span class="token punctuation">)</span> Set configuration passwordq<span class="token punctuation">)</span> Quit confige/n/d/r/c/s/q<span class="token operator">></span>q<span class="token comment" spellcheck="true">#q 退出</span>rclone <span class="token function">mount</span> 这里填写第二步创建名称:/ 这里填写网盘挂载到的文件夹名称 --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --umask 000 Fatal error: failed to <span class="token function">mount</span> FUSE fs: fusermount: signal: bad system call<span class="token comment" spellcheck="true">#提示缺少fusermont依赖</span></code></pre><p>点击下载<a href="../../../data/fusermont">Fusermont</a>，解压，拷贝到<br><code>/data/data/com.termux/files/usr/bin/</code><br>文件夹里</p><pre class=" language-bash"><code class="language-bash"><span class="token function">chmod</span> +x /data/data/com.termux/files/usr/bin/fusermontrclone <span class="token function">mount</span> Microsoft:/ ./mydir/ --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --umask 000 加上 --daemon 可以后台静默运行</code></pre><p>查看云盘文件是否出现在文件夹里<code>ls ./mydir</code><br> 这篇记录大致完成了，用aria2下载的文件用mv 移动到挂载到文件夹里等待上传就行了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://baike.baidu.com/item/OneDrive&quot;&gt;Microsoft OneDrive&lt;/a&gt;</summary>
      
    
    
    
    
    <category term="Linux" scheme="http://example.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>在手机里安装alpine做服务器</title>
    <link href="http://example.com/2022/01/11/alpine%E6%B2%99%E7%9B%92/"/>
    <id>http://example.com/2022/01/11/alpine%E6%B2%99%E7%9B%92/</id>
    <published>2022-01-11T19:16:28.000Z</published>
    <updated>2022-01-14T13:34:02.891Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>之前一直用Debian系列的服务器，因为习惯了apt软件包管理，之前一直想尝试centos实在用不惯yun以至于用了两年的debian，现在服务器空间越来越吃紧了于是想把系统换成<a href="https://www.alpinelinux.org/">alpine</a></p><h3 id="部署与配置"><a href="#部署与配置" class="headerlink" title="部署与配置"></a>部署与配置</h3><p>先到手机<a href="https://f-droid.org/packages/com.termux/">Termux</a>官网下载软件安装</p><p>打开Termux后替换包源码</p><pre class=" language-bash"><code class="language-bash"><span class="token function">sed</span> -i <span class="token string">'s@^\(deb.*stable main\)<span class="token variable">$@deb</span> https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main@'</span> <span class="token variable">$PREFIX</span>/etc/apt/sources.list</code></pre><p>把软件源换成国内<a href="https://baike.baidu.com/item/%E5%BC%80%E6%BA%90%E9%95%9C%E5%83%8F%E7%AB%99/7395020">清华镜像站</a>这样可以加速安装软件</p><p>无root权限无法使用tsu则不需要安装tsu。</p><pre class=" language-bash"><code class="language-bash">pkg updatepkg <span class="token function">install</span> -y tsu proot <span class="token function">wget</span></code></pre><p>有没有root权限其实相差并不大，只不过安卓10开始WEB服务的默认80端口无法开启，要么修改端口为1024以上，要么启用root权限进行服务。</p><p>接下来在home目录里创建一个文件夹用于存放<a href="https://baike.baidu.com/item/%E6%B2%99%E7%9B%92/3769297">沙盒系统</a></p><pre class=" language-bash"><code class="language-bash"><span class="token function">mkdir</span> rootfs <span class="token operator">&amp;&amp;</span> <span class="token function">cd</span> rootfs<span class="token comment" spellcheck="true">#这里的root是文件夹名称，随意定义</span>curl -<span class="token comment" spellcheck="true"># -O https://mirrors.tuna.tsinghua.edu.cn/lxc-images/images/alpine/3.15/arm64/default/20220110_13%3A00/rootfs.tar.xz</span><span class="token comment" spellcheck="true">#这边直接用Termux自带的curl缓存rootfs压缩文件</span><span class="token comment" spellcheck="true">#用浏览器打开mirrors.tuna.tsinghua.edu.cn/lxc-images/images选择其它系统文件</span><span class="token function">tar</span> xpf rootfs.tar.xz <span class="token comment" spellcheck="true">#解压文件</span></code></pre><p>用 <code>ls</code> 查看有如下文件夹</p><p><code>bin  etc   lib    mnt  proc  run   srv  tmp  var dev  home  media  opt  root  sbin  sys  usr</code><br>接下来就是用脚本引用启动这个沙盒了，都知道除了 <code>proot</code> 还有个 <code>chroot</code> 为什么只用 <code>proot</code> 呢<br>原因其实很简单 <code>chroot</code> 需要用Root权限，很多人手机都没有所以劝退🙄</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#!/data/data/com.termux/files/usr/bin/bash </span>user<span class="token operator">=</span><span class="token string">"root"</span>f<span class="token operator">=</span><span class="token string">"rootfsfs"</span>h<span class="token operator">=</span><span class="token string">"/root"</span>unset LD_PRELOADc<span class="token operator">=</span><span class="token string">"proot"</span>c+<span class="token operator">=</span><span class="token string">" --link2symlink"</span>c+<span class="token operator">=</span><span class="token string">" -0"</span>c+<span class="token operator">=</span><span class="token string">" -r  <span class="token variable">$f</span>"</span>c+<span class="token operator">=</span><span class="token string">" -b /dev"</span>c+<span class="token operator">=</span><span class="token string">" -b /proc"</span>c+<span class="token operator">=</span><span class="token string">" -b  <span class="token variable">$f</span><span class="token variable">$h</span>:/dev/shm"</span><span class="token comment" spellcheck="true">#您可以在此处修改挂载目录</span>c+<span class="token operator">=</span><span class="token string">" -b /sdcard/:/mnt/sdcard/"</span>c+<span class="token operator">=</span><span class="token string">" -w <span class="token variable">$h</span>"</span>c+<span class="token operator">=</span><span class="token string">" /usr/bin/env -i"</span>c+<span class="token operator">=</span><span class="token string">" HOME=<span class="token variable">$h</span>"</span>c+<span class="token operator">=</span><span class="token string">" PATH=/usr/local/sbin:/usr/local/bin:/bin:/usr/bin:/sbin:/usr/sbin:/usr/games:/usr/local/games"</span>c+<span class="token operator">=</span><span class="token string">" TERM=xterm-256color"</span><span class="token comment" spellcheck="true">#c+=" LANG=zh_CN.UTF-8"</span>c+<span class="token operator">=</span><span class="token string">" /bin/ash --login"</span>com<span class="token operator">=</span><span class="token string">"<span class="token variable">$@</span>"</span><span class="token keyword">if</span> <span class="token punctuation">[</span> -z <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span><span class="token function">exec</span> <span class="token variable">$c</span><span class="token keyword">else</span><span class="token variable">$c</span> -c <span class="token string">"<span class="token variable">$c</span>"</span><span class="token keyword">fi</span></code></pre><p>将脚本写入<code>alpine.sh</code>文件里</p><pre class=" language-bash"><code class="language-bash"><span class="token function">chmod</span> +x alpine.sh<span class="token function">bash</span> alpine.sh</code></pre><p>如果有Root权限的直接输入<code>tsu</code>再执行<code>bash alpine.sh</code></p><p>接下来我们就可以进入刚刚安装好的系统里<br>虽然已经安装好了，但是没办法联网安装软件，还要配置一些文件</p><pre class=" language-bash"><code class="language-bash"><span class="token function">rm</span> -rf /etc/resolv.conf<span class="token function">touch</span> /etc/resolv.conf <span class="token keyword">echo</span> <span class="token string">"nameserver 0.0.8.8nameserver 8.8.8.8"</span> <span class="token operator">></span>/etc/resolv.conf<span class="token comment" spellcheck="true">#这时候可以联网，但官方软件地址速度很慢，所以继续换源</span><span class="token function">sed</span> -i <span class="token string">'s/dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn/g'</span> /etc/apk/repositories<span class="token comment" spellcheck="true">#把dl-cdn.alpinelinux.org替换成mirrors.tuna.tsinghua.edu.cn</span>apk updateapk upgrade apk add <span class="token function">wget</span> vim</code></pre><p>安装<code>Apache2 PHP</code></p><pre class=" language-bash"><code class="language-bash">apk add php-apache2 php-pdo php-mbstring php-gd php-dom php-pear php-pdo_mysql php-session php-simplexml php-gmp php-sockets php-json php-gettext php-iconv php-ctype php-curl php-exif php-ftp php-fileinfo php-intl php-ldap php-mysqli php-zip php-bz2<span class="token keyword">echo</span> <span class="token string">"LoadModule php7_module modules/mod_php7.soLoadModule rewrite_module modules/mod_rewrite.so"</span> <span class="token operator">>></span> /etc/apache2/httpd.conf<span class="token comment" spellcheck="true">#如果不是用tsu启动的还要再修改一下端口</span><span class="token function">sed</span> -i <span class="token string">'s/Listen 80/Listen 8080/g'</span> /etc/apache2/httpd.conf</code></pre><p>现在可以启动服务<code>rc-service apache2 start</code>很不幸回车后警告服务运行中，这时你打开浏览器<a href="127.0.0.1">localhost</a>发现服务没运行啊？所以得重载一下</p><pre class=" language-bash"><code class="language-bash">rc-status<span class="token function">touch</span> /run/openrc/softlevel</code></pre><p>启动服务<code>rc-service apache2 start</code>现在可以了<br><a href="127.0.0.1">localhost</a><br><a href="127.0.0.1:8080">localhost:8080</a><br>这时打开链接就可以看到成果了</p><p>配置PHP上传文件的大小限制</p><pre class=" language-bash"><code class="language-bash">vim /etc/php7/php.inipost_max_size <span class="token operator">=</span> 2M Post最大限制upload_max_filesize <span class="token operator">=</span> 2M 上传文件的最大限制max_file_uploads <span class="token operator">=</span> 20 最大并发上传数量</code></pre><p>当然了有些项目要用到数据库<code>Mysql</code>or<code>Mariadb</code>所以我们还要安装一个<code>Mysql</code></p><pre class=" language-bash"><code class="language-bash">apk add mysql mysql-client<span class="token function">passwd</span> root <span class="token comment" spellcheck="true">#修改一下登入密码</span>rc-service mariadb startmysql_secure_installation <span class="token comment" spellcheck="true">#初始化数据库</span></code></pre><pre><code>NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDBSERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!注意:运行这个脚本的所有部分是所有MariaDB推荐服务器在生产使用!请仔细阅读每一步!In order to log into MariaDB to secure it, we&#39;ll need the currentpassword for the root user. If you&#39;ve just installed MariaDB, andhaven&#39;t set the root password yet, you should just press enter here.为了登录MariaDB安全,我们需要的登入根用户密码。如果你刚刚安装MariaDB,还没有设置root密码,你应该在这里按回车。Enter current password for root (enter for none):输入当前密码为根(没有设置按回车): ***</code></pre><pre><code>Setting the root password or using the unix_socket ensures that nobodycan log into the MariaDB root user without the proper authorisation.设置root密码或使用unix_socket确保没人可以登录到MariaDB根用户没有适当的授权。You already have your root account protected, so you can safely answer &#39;n&#39;.你已经有根帐户保护,所以你可以放心地回答“n”。Switch to unix_socket authentication [Y/n]切换到unix_socket认证[是/否]</code></pre><pre><code>You already have your root account protected, so you can safely answer &#39;n&#39;.你已经有根帐户保护,所以你可以放心地回答“n”。Change the root password? [Y/n]改变根密码?[是/否]</code></pre><pre><code>By default, a MariaDB installation has an anonymous user, allowing anyoneto log into MariaDB without having to have a user account created forthem.  This is intended only for testing, and to make the installationgo a bit smoother.  You should remove them before moving into aproduction environment.默认情况下,MariaDB安装有一个匿名用户,允许任何人登录MariaDB而无需创建用户帐户他们。这个目的是只用于测试,安装去更平缓一些。你应该进入前删除它们生产环境。Remove anonymous users?[Y/n]删除匿名用户?[是/否]</code></pre><pre><code>Normally, root should only be allowed to connect from &#39;localhost&#39;.  Thisensures that someone cannot guess at the root password from the network.正常情况下,Root用户只允许连接“本地localhost”。这确保坏人不能猜测网络的root密码。Disallow root login remotely? [Y/n]不允许远程root登录吗?[是/否]</code></pre><pre><code>By default, MariaDB comes with a database named &#39;test&#39; that anyone canaccess.  This is also intended only for testing, and should be removedbefore moving into a production environment.默认情况下,MariaDB附带了一个名为“测试”的数据库,任何人都可以，访问。这也是只有测试,并且应该被删除，之前移动到生产环境中。Remove test database and access to it? [Y/n]删除测试数据库和访问吗?[是/否]</code></pre><pre><code>Reloading the privilege tables will ensure that all changes made so farwill take effect immediately.重新加载权限表将确保所有到目前为止所做的更改将立即生效。Reload privilege tables now? [Y/n]现在重新加载权限表吗?[是/否]</code></pre><pre><code>Cleaning up...清理....All done!  If you&#39;ve completed all of the above steps, your MariaDBinstallation should now be secure.全部完成!如果你已经完成了以上步骤,MariaDB安装现在应该安全。Thanks for using MariaDB!感谢使用MariaDB!</code></pre><p>根据提示进行设置，完成后接下去创建数据库</p><pre class=" language-bash"><code class="language-bash">mysql -u root -p<span class="token comment" spellcheck="true">#输入密码或者回车登入</span>create database name <span class="token punctuation">;</span><span class="token comment" spellcheck="true">#创建数据库</span>drop database name<span class="token punctuation">;</span><span class="token comment" spellcheck="true">#删除数据库</span><span class="token comment" spellcheck="true">#show databases;</span>列出所有数据库mysqldump -u 用户名 -p 数据库名 <span class="token operator">></span> 数据库文件名.sql<span class="token comment" spellcheck="true">#导出数据库</span>mysql -u用户名 -p 数据库名 <span class="token operator">&lt;</span> 数据库文件名.sql<span class="token comment" spellcheck="true">#导入数据库</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;之前一直用Debian系列的服务器，因为习惯了apt软件包管理，之前一直想尝试centos实在用不惯yun以至于用了两年的debian，现在</summary>
      
    
    
    
    
    <category term="Linux" scheme="http://example.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>链接获取QQ头像</title>
    <link href="http://example.com/2021/04/16/%E9%93%BE%E6%8E%A5%E8%8E%B7%E5%8F%96QQ%E5%A4%B4%E5%83%8F/"/>
    <id>http://example.com/2021/04/16/%E9%93%BE%E6%8E%A5%E8%8E%B7%E5%8F%96QQ%E5%A4%B4%E5%83%8F/</id>
    <published>2021-04-16T19:16:28.000Z</published>
    <updated>2022-01-14T13:35:19.167Z</updated>
    
    <content type="html"><![CDATA[<pre><code>http://q1.qlogo.cn/g?b=qq&amp;nk=QQ号&amp;s=640</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;pre&gt;&lt;code&gt;http://q1.qlogo.cn/g?b=qq&amp;amp;nk=QQ号&amp;amp;s=640
&lt;/code&gt;&lt;/pre&gt;
</summary>
      
    
    
    
    
    <category term="Android" scheme="http://example.com/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>蓝奏云的变相用法</title>
    <link href="http://example.com/2021/03/14/%E8%93%9D%E5%A5%8F%E4%BA%91%E7%9A%84%E5%8F%98%E7%9B%B8%E7%94%A8%E6%B3%95/"/>
    <id>http://example.com/2021/03/14/%E8%93%9D%E5%A5%8F%E4%BA%91%E7%9A%84%E5%8F%98%E7%9B%B8%E7%94%A8%E6%B3%95/</id>
    <published>2021-03-14T15:31:09.000Z</published>
    <updated>2022-01-14T13:34:14.127Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>蓝奏云是一个提供云存储服务的平台，功能上类似于百度网盘、腾讯微云等产品。该网盘最大的特点，就是不会对免费用户进行上传下载限速，所以广受用户好评。蓝奏云主要靠广告来盈利，在它的文件分享页面，会有一些广告展示。普通用户只能上传100M以内的文件，蓝奏云以最低的成本满足了最多的用户!现在我们来谈谈怎么变相上传超过100M的文件!没有使用破解的方法进行变相上传。</p><h3 id="认识"><a href="#认识" class="headerlink" title="认识"></a>认识</h3><p>既然上面说了大小是主要问题所以我们得了解什么压缩方式是最暴力的，zip? 7z?其实都不是，我们要用tar和xz，是不是很少听说，又或者没有听说过?tar压缩用来打包文件夹，因为xz只能用来压缩一个文件，而不能压缩文件夹</p><h3 id="使用tar"><a href="#使用tar" class="headerlink" title="使用tar"></a>使用tar</h3><p>打开termux软件直接输入tar，xz就可以直接使用，一般Linux都会自带上这些工具，可以说在Linux最常用的打包方式了</p><pre class=" language-bash"><code class="language-bash">termux-setup-storage <span class="token comment" spellcheck="true">#获取读写/sdcard/的权限</span><span class="token function">cd</span> /sdcard/Download/ <span class="token comment" spellcheck="true">#进入你的工作目录，我一般在Download目录</span><span class="token function">tar</span> cpvf file.tar files <span class="token comment" spellcheck="true">#c表示添加新的 p保持权限所有 v表示显示过程</span>f表示指定的备份文件 后面跟随压缩包名称 再后面就是文件需要打包的目录或者文件</code></pre><h3 id="使用xz"><a href="#使用xz" class="headerlink" title="使用xz"></a>使用xz</h3><pre class=" language-bash"><code class="language-bash">xz -z -v -9 tar压缩包名字z表示创建xz压缩 -v同上 -9表示压缩率 0-9可选</code></pre><p>得到一个{name}.tar.xz 的文件，如果压缩完的文件还是100M以上那怎么办?<br>不还是不能上传到蓝奏云呀？如果我说把一个压缩包分类切割为两个呢?200m不就变成两个100m啦？什么?你说两个还是太大?那就按大小分割不就成啦？使用<code>split</code>指令</p><pre class=" language-bash"><code class="language-bash"><span class="token function">split</span> -b 100m 压缩包名字 </code></pre><p>-b表示按照字节切割千万记得100后面一定要跟随单位否则会以100b切割一个文件，那么100m就会分割成1024x100=102400个文件，这时你的设备可能出现不良反应🌚</p><h3 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h3><p>切割完后会有xxa xxb xxc 这些文件你可以给他们改个名字，比如 xxa改成1 xxb改成2….但是xxa改成2 xxb千万别改成1 不然合并包的时候顺序乱了就无法进行解压啦，这点很重要！</p><p>蓝奏云支持的后缀zip 记得给分裂的文件添加一个后缀.zip比如xxa改成 file1.zip xxb=file2.zip xxc=file3…..<br>到蓝奏云创建一个文件夹，进入文件夹上传文件</p><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>点蓝奏云目录的分享链接，复制到新的窗口打开，依次下载里面所有的文件。</p><pre class=" language-bash"><code class="language-bash"><span class="token function">find</span> /sdcard/ -name file*zip <span class="token operator">|</span><span class="token function">xargs</span> -i <span class="token function">cat</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;&amp;#125; > name.tar.xz</span><span class="token function">find</span> /sdcard/ -name name.tar.xz <span class="token operator">|</span>xarge -i <span class="token function">tar</span> xpf <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;&amp;#125;</span></code></pre><p>find 是Linux的搜索工具 指定/sdcard文件夹下面的所有文件夹内搜索 按照名字file*.zip搜索 <em>号表示所有  用法比较多比如你有个文件夹叫afjvkrkckr，你要进入只能一个一个字母打?当然不! 你可以 cd a</em>r 这样 也可以 cd af* 这个符号可以代替所有xargs -i 表示输出搜索到的名字 cat打印{搜索到的名字文件}到name.tar.xz这个文件里<br>下面一条就是解压搜索到的名字</p><p>自此本教程就结束啦!</p><h3 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h3><p>本文用到<code>tar xz cat find xargs split</code>这些工具，都是Linux常用的工具</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;蓝奏云是一个提供云存储服务的平台，功能上类似于百度网盘、腾讯微云等产品。该网盘最大的特点，就是不会对免费用户进行上传下载限速，所以广受用户好</summary>
      
    
    
    
    
    <category term="Termux" scheme="http://example.com/tags/Termux/"/>
    
  </entry>
  
  <entry>
    <title>如何使用终端卸载系统自带的软件？</title>
    <link href="http://example.com/2021/03/13/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E7%BB%88%E7%AB%AF%E5%8D%B8%E8%BD%BD%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%B8%A6%E7%9A%84%E8%BD%AF%E4%BB%B6%EF%BC%9F/"/>
    <id>http://example.com/2021/03/13/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E7%BB%88%E7%AB%AF%E5%8D%B8%E8%BD%BD%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%B8%A6%E7%9A%84%E8%BD%AF%E4%BB%B6%EF%BC%9F/</id>
    <published>2021-03-13T14:08:46.000Z</published>
    <updated>2022-01-14T13:34:27.815Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>手机官方系统自带的软件很多，你用不到的也很多，放在一边吧还给你推送广告😓，干脆把它卸载了呗!百度上可以找到很多的卸载自带软件的APP，为了卸载软件去下载一个广告更多的软件划不来呀，所以今天还是用万能的工具箱<code>Termux</code>有无<code>Root</code>都可以使用，只不过没有root权限会麻烦一些罢了。</p><h3 id="无Root权限卸载"><a href="#无Root权限卸载" class="headerlink" title="无Root权限卸载"></a>无Root权限卸载</h3><p>在没有root权限的情况下可以使用<a href="https://jingyan.baidu.com/article/ce4366494962083773afd3d0.html">Adb</a>工具<br>克隆这个仓库的文件，这是Magisk的adb包可以直接使用这个</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/Magisk-Modules-Repo/adb-ndk.git <span class="token function">cd</span> adb-ndk/bin<span class="token function">chmod</span> +x *<span class="token function">mv</span> * <span class="token variable">$PREFIX</span>/bin/</code></pre><p>首先在Android系统开发者模式里面开启“无线调试”点击进去可以看到IP地址和端口，记住这个到终端执行</p><pre class=" language-bash"><code class="language-bash">adb connect ip:prot <span class="token comment" spellcheck="true">#连接网络设备</span>adb devices <span class="token comment" spellcheck="true">#可以看到有一个设备显示啦</span>adb shell pm uninstall --user 0 apk-nameSuccess <span class="token comment" spellcheck="true">#出现这个时表示成功</span></code></pre><h3 id="Root卸载"><a href="#Root卸载" class="headerlink" title="Root卸载"></a>Root卸载</h3><p>如果有root那就方便了很多，不需要使用adb工具</p><pre class=" language-bash"><code class="language-bash"><span class="token function">su</span>  <span class="token comment" spellcheck="true">#切换到root</span>pm uninstall --user 0 apk-nameSuccess <span class="token comment" spellcheck="true">#出现这个时表示成功</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;手机官方系统自带的软件很多，你用不到的也很多，放在一边吧还给你推送广告😓，干脆把它卸载了呗!百度上可以找到很多的卸载自带软件的APP，为了</summary>
      
    
    
    
    
    <category term="Android" scheme="http://example.com/tags/Android/"/>
    
  </entry>
  
</feed>
