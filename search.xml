<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Rclone+OneDrive+Aria2</title>
      <link href="/2022/01/14/aria2/"/>
      <url>/2022/01/14/aria2/</url>
      
        <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p><a href="https://baike.baidu.com/item/OneDrive">Microsoft OneDrive</a> 就是微软的云盘，一般都知道这玩意<br><a href="http://aria2.baisheng999.com/">Aria2</a> 这个知道的人稍微偏少，主要是命令行的一个下载工具，和<a href="https://baike.baidu.com/item/wget/">Wget</a>类似的工具，但又比wget下载协议多比如种子磁力链接<br><a href="https://rclone.org/">Rclone</a>知道这个的就真的少之又少了，百度百科都没收录，官网介绍如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Rclone is a command line program to manage files on cloud storage. It is a feature rich alternative to cloud vendors&#x27; web storage interfaces. Over 40 cloud storage products support rclone including S3 object stores, business &amp; consumer file storage services, as well as standard transfer protocols.</span><br><span class="line"></span><br><span class="line">Rclone是一个命令行程序来管理云存储上的文件。这是一个功能丰富的选择云供应商的网络存储接口。超过40岁的云存储产品支持rclone包括S3对象商店,商业和消费者的文件存储服务,以及标准的传输协议。</span><br></pre></td></tr></table></figure><p>讲通俗点就是把网盘挂载到本地xx文件夹里便于操作</p><h3 id="Aria2"><a href="#Aria2" class="headerlink" title="Aria2"></a>Aria2</h3><p>本文使用Termux + Alpine环境进行实战，与其他linux发行版相差不大</p><p>在安装配置好的alpine os内安装Aria2并没有什么难度，无非就是使用apk包管理进行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apk add aria2</span><br></pre></td></tr></table></figure><p>然后就可以通过下面这段进行下载文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aria2c &#123;url&#125; </span><br></pre></td></tr></table></figure><p>不过这样也只能下载http协议的文件，也只能通过命令行执行，没有一个漂亮的UI，而且功能不算强大我不要，所以接下来要创建Aria2的配置和UI<br>首先进入 <code>/etc</code> 文件夹  <code>ls</code> 查看是否有 <code>aria2</code> 文件夹，没用就创建</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /etc/aria2</span><br></pre></td></tr></table></figure><p>然后创建</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">touch /etc/aria2/aria2.conf <span class="comment">#配置文件</span></span><br><span class="line">touch /etc/aria2/aria2.session <span class="comment">#下载记录文件</span></span><br><span class="line">touch /etc/aria2/dht.dat <span class="comment">#ipv4网络节点数据</span></span><br><span class="line">touch /etc/aria2/dht6.dat <span class="comment">#ipv6</span></span><br><span class="line">```` </span><br><span class="line">把下面配置写进`/etc/aria2/aria2.conf `里</span><br><span class="line">```bash</span><br><span class="line"><span class="comment"># 设置的RPC授权令牌, 取代 --rpc-user 和 --rpc-passwd 选项</span></span><br><span class="line"><span class="comment"># token可以自己随意设置</span></span><br><span class="line">rpc-secret=删掉文字，输入一串代表密码的字符</span><br><span class="line"><span class="comment"># 下面是ssl证书，可以先不管</span></span><br><span class="line"><span class="comment">#rpc-private-key=/etc/aria2/server.key</span></span><br><span class="line"><span class="comment">#rpc-certificate=/etc/aria2/server.crt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#允许rpc</span></span><br><span class="line">enable-rpc=<span class="literal">true</span></span><br><span class="line"><span class="comment">#允许所有来源, web界面跨域权限需要</span></span><br><span class="line">rpc-allow-origin-all=<span class="literal">true</span></span><br><span class="line"><span class="comment">#允许外部访问，false的话只监听本地端口</span></span><br><span class="line">rpc-listen-all=<span class="literal">true</span></span><br><span class="line"><span class="comment">#RPC端口, 仅当默认端口被占用时修改</span></span><br><span class="line">rpc-listen-port=6800</span><br><span class="line"></span><br><span class="line"><span class="comment">#文件保存路径, 默认为当前启动位置</span></span><br><span class="line">dir=/root/downloads/</span><br><span class="line"><span class="comment">#从会话文件中读取下载任务</span></span><br><span class="line">input-file=/etc/aria2/aria2.session</span><br><span class="line"><span class="comment">#在Aria2退出时保存`错误/未完成`的下载任务到会话文件</span></span><br><span class="line">save-session=/etc/aria2/aria2.session</span><br><span class="line"><span class="comment">#定时保存会话, 0为退出时才保存, 需1.16.1以上版本, 默认:0</span></span><br><span class="line"><span class="comment">#save-session-interval=60</span></span><br><span class="line">force-save=<span class="literal">true</span></span><br><span class="line"><span class="comment">#log=/aria2log</span></span><br><span class="line"><span class="comment">#log-level=error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#最大同时下载数(任务数), 路由建议值: 3</span></span><br><span class="line">max-concurrent-downloads=5</span><br><span class="line"><span class="comment">#断点续传</span></span><br><span class="line"><span class="built_in">continue</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment">#同服务器连接数</span></span><br><span class="line">max-connection-per-server=5</span><br><span class="line"><span class="comment">#最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要</span></span><br><span class="line">min-split-size=10M</span><br><span class="line"><span class="comment">#单文件最大线程数, 路由建议值: 5</span></span><br><span class="line">split=10</span><br><span class="line"><span class="comment">#下载速度限制</span></span><br><span class="line">max-overall-download-limit=0</span><br><span class="line"><span class="comment">#单文件速度限制</span></span><br><span class="line">max-download-limit=0</span><br><span class="line"><span class="comment">#上传速度限制</span></span><br><span class="line">max-overall-upload-limit=0</span><br><span class="line"><span class="comment">#单文件速度限制</span></span><br><span class="line">max-upload-limit=0</span><br><span class="line"><span class="comment">#断开速度过慢的连接</span></span><br><span class="line"><span class="comment">#lowest-speed-limit=0</span></span><br><span class="line"><span class="comment">#文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本</span></span><br><span class="line"><span class="comment">#disk-cache=0</span></span><br><span class="line"><span class="comment">#另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)</span></span><br><span class="line"><span class="comment">#enable-mmap=true</span></span><br><span class="line"><span class="comment">#文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长</span></span><br><span class="line"><span class="comment">#NTFS建议使用falloc, EXT3/4建议trunc, MAC 下需要注释此项所需时间 </span></span><br><span class="line"><span class="comment">#none &lt; falloc ? trunc &lt;&lt; prealloc, falloc和trunc需要文件系统和内核支持</span></span><br><span class="line">file-allocation=prealloc</span><br><span class="line"><span class="comment"># DHT（IPv4）文件</span></span><br><span class="line">dht-file-path=/etc/aria2/dht.dat</span><br><span class="line"><span class="comment"># # DHT（IPv6）文件</span></span><br><span class="line">dht-file-path6=/etc/aria2/dht6.dat</span><br><span class="line"><span class="comment"># # 打开DHT功能, PT需要禁用, 默认:true</span></span><br><span class="line"><span class="comment"># enable-dht=true</span></span><br><span class="line"><span class="comment"># # 打开IPv6 DHT功能, PT需要禁用</span></span><br><span class="line">enable-dht6=<span class="literal">true</span></span><br><span class="line"><span class="comment"># # DHT网络监听端口, 默认:6881-6999</span></span><br><span class="line">dht-listen-port=6881-6999</span><br><span class="line"><span class="comment"># # 本地节点查找, PT需要禁用, 默认:false</span></span><br><span class="line">bt-enable-lpd=<span class="literal">true</span></span><br><span class="line"><span class="comment"># # 种子交换, PT需要禁用, 默认:true</span></span><br><span class="line">enable-peer-exchange=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#种子服务器地址，announce后面有个,号隔开</span></span><br><span class="line">bt-tracker=udp://open.tracker.cl:1337/announce,udp://tracker.opentrackr.org:1337/announce,http://tracker.opentrackr.org:1337/announce,udp://9.rarbg.com:2810/announce,udp://tracker.openbittorrent.com:6969/announce</span><br></pre></td></tr></table></figure><p><code>bt-tracker=</code>有时候需要更新地址，可以在<a href="https://github.com/ngosang/trackerslist/blob/master/trackers_all.txt">trackerslist</a>里复制，划分好加入aria2.conf里。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aria2c --conf-path=/etc/aria2/aria2.conf -D</span><br><span class="line"><span class="comment">#后台启动服务</span></span><br></pre></td></tr></table></figure><p>官方的AriaNg <a href="http://ariang.mayswind.net/latest/#!/downloading">Dome</a><br>我放Gitee的 <a href="http://yits.gitee.io/aria">Dome</a></p><p>你也可以自己搭建本地的用<a href="http://ariang.mayswind.net/zh_Hans/">Ariang</a>下载Web文件，解压Web根目录下面，启动网页服务后打开浏览器，这里不会可以看我其他文章。</p><p>在左边 <code>侧边栏&gt;AriaNg 设置&gt;Aria PRC 密钥</code> 输入上面自己设置的字符串，刷新网页就可以看到，aria2状态是已连接了，有时间的话你可以尝试下载一些比较热门的磁力链接文件预热一下dht.dat文件，这里推荐一个好用的磁力搜索引擎<a href="https://search.btfox.pw/">磁力狐</a>一般电影什么的都可以找到资源，但是一个视频就好几个G存自己设备上好像太浪费了，一般看完就得删了，下次看还得找磁力继续下载太麻烦。</p><h3 id="Microsoft-OneDrive"><a href="#Microsoft-OneDrive" class="headerlink" title="Microsoft OneDrive"></a>Microsoft OneDrive</h3><p>上网看了一下Microsoft OneDrive可以便宜薅到5T空间的账号四舍五入对于不要钱。这里就不放教程了，可以淘宝买，也可以另寻它路，个人账号的话只有5G的免费空间。注册好后开始安装和配置Rclone</p><h3 id="Rclone-需要Root权限才能挂载"><a href="#Rclone-需要Root权限才能挂载" class="headerlink" title="Rclone 需要Root权限才能挂载"></a>Rclone 需要Root权限才能挂载</h3><p>我都是在Termux安装和挂载云盘到rootfs里的mnt文件夹里才启动proot容器，在容器里好像挂载不了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line">pkg install rclone </span><br><span class="line">tsu</span><br><span class="line">rclone config</span><br><span class="line"></span><br><span class="line">Current remotes:</span><br><span class="line">e) Edit existing remote</span><br><span class="line">n) New remote</span><br><span class="line">d) Delete remote</span><br><span class="line">r) Rename remote</span><br><span class="line">c) Copy remote</span><br><span class="line">s) Set configuration password</span><br><span class="line">q) Quit config</span><br><span class="line">e/n/d/r/c/s/q&gt; n                          //第二步输入n创建新的配置</span><br><span class="line">name&gt; 挂载网盘的名称（任意写，中间不能有空格）</span><br><span class="line"></span><br><span class="line">Option Storage.</span><br><span class="line">Type of storage to configure.</span><br><span class="line">Enter a string value. Press Enter <span class="keyword">for</span> the default (<span class="string">&quot;&quot;</span>).</span><br><span class="line">Choose a number from below, or <span class="built_in">type</span> <span class="keyword">in</span> your own value.</span><br><span class="line"> 1 / 1Fichier</span><br><span class="line">   \ <span class="string">&quot;fichier&quot;</span></span><br><span class="line"> 2 / Alias <span class="keyword">for</span> an existing remote</span><br><span class="line">   \ <span class="string">&quot;alias&quot;</span></span><br><span class="line"> 3 / Amazon Drive</span><br><span class="line">   \ <span class="string">&quot;amazon cloud drive&quot;</span></span><br><span class="line"> 4 / Amazon S3 Compliant Storage Providers including AWS, Alibaba, Ceph, Digital Ocean, Dreamhost, IBM COS, Minio, SeaweedFS, and Tencent COS</span><br><span class="line">   \ <span class="string">&quot;s3&quot;</span></span><br><span class="line"> 5 / Backblaze B2</span><br><span class="line">   \ <span class="string">&quot;b2&quot;</span></span><br><span class="line"> 6 / Better checksums <span class="keyword">for</span> other remotes</span><br><span class="line">   \ <span class="string">&quot;hasher&quot;</span></span><br><span class="line"> 7 / Box</span><br><span class="line">   \ <span class="string">&quot;box&quot;</span></span><br><span class="line"> 8 / Cache a remote</span><br><span class="line">   \ <span class="string">&quot;cache&quot;</span></span><br><span class="line"> 9 / Citrix Sharefile</span><br><span class="line">   \ <span class="string">&quot;sharefile&quot;</span></span><br><span class="line">10 / Compress a remote</span><br><span class="line">   \ <span class="string">&quot;compress&quot;</span></span><br><span class="line">11 / Dropbox</span><br><span class="line">   \ <span class="string">&quot;dropbox&quot;</span></span><br><span class="line">12 / Encrypt/Decrypt a remote</span><br><span class="line">   \ <span class="string">&quot;crypt&quot;</span></span><br><span class="line">13 / Enterprise File Fabric</span><br><span class="line">   \ <span class="string">&quot;filefabric&quot;</span></span><br><span class="line">14 / FTP Connection</span><br><span class="line">   \ <span class="string">&quot;ftp&quot;</span></span><br><span class="line">15 / Google Cloud Storage (this is not Google Drive)</span><br><span class="line">   \ <span class="string">&quot;google cloud storage&quot;</span></span><br><span class="line">16 / Google Drive</span><br><span class="line">   \ <span class="string">&quot;drive&quot;</span></span><br><span class="line">17 / Google Photos</span><br><span class="line">   \ <span class="string">&quot;google photos&quot;</span></span><br><span class="line">18 / Hadoop distributed file system</span><br><span class="line">   \ <span class="string">&quot;hdfs&quot;</span></span><br><span class="line">19 / Hubic</span><br><span class="line">   \ <span class="string">&quot;hubic&quot;</span></span><br><span class="line">20 / In memory object storage system.</span><br><span class="line">   \ <span class="string">&quot;memory&quot;</span></span><br><span class="line">21 / Jottacloud</span><br><span class="line">   \ <span class="string">&quot;jottacloud&quot;</span></span><br><span class="line">22 / Koofr</span><br><span class="line">   \ <span class="string">&quot;koofr&quot;</span></span><br><span class="line">23 / Local Disk</span><br><span class="line">   \ <span class="string">&quot;local&quot;</span></span><br><span class="line">24 / Mail.ru Cloud</span><br><span class="line">   \ <span class="string">&quot;mailru&quot;</span></span><br><span class="line">25 / Mega</span><br><span class="line">   \ <span class="string">&quot;mega&quot;</span></span><br><span class="line">26 / Microsoft Azure Blob Storage</span><br><span class="line">   \ <span class="string">&quot;azureblob&quot;</span></span><br><span class="line">27 / Microsoft OneDrive</span><br><span class="line">   \ <span class="string">&quot;onedrive&quot;</span></span><br><span class="line">28 / OpenDrive</span><br><span class="line">   \ <span class="string">&quot;opendrive&quot;</span></span><br><span class="line">29 / OpenStack Swift (Rackspace Cloud Files, Memset Memstore, OVH)</span><br><span class="line">   \ <span class="string">&quot;swift&quot;</span></span><br><span class="line">30 / Pcloud</span><br><span class="line">   \ <span class="string">&quot;pcloud&quot;</span></span><br><span class="line">31 / Put.io</span><br><span class="line">   \ <span class="string">&quot;putio&quot;</span></span><br><span class="line">32 / QingCloud Object Storage</span><br><span class="line">   \ <span class="string">&quot;qingstor&quot;</span></span><br><span class="line">33 / SSH/SFTP Connection</span><br><span class="line">   \ <span class="string">&quot;sftp&quot;</span></span><br><span class="line">34 / Sia Decentralized Cloud</span><br><span class="line">   \ <span class="string">&quot;sia&quot;</span></span><br><span class="line">35 / Sugarsync</span><br><span class="line">   \ <span class="string">&quot;sugarsync&quot;</span></span><br><span class="line">36 / Tardigrade Decentralized Cloud Storage</span><br><span class="line">   \ <span class="string">&quot;tardigrade&quot;</span></span><br><span class="line">37 / Transparently chunk/split large files</span><br><span class="line">   \ <span class="string">&quot;chunker&quot;</span></span><br><span class="line">38 / Union merges the contents of several upstream fs</span><br><span class="line">   \ <span class="string">&quot;union&quot;</span></span><br><span class="line">39 / Uptobox</span><br><span class="line">   \ <span class="string">&quot;uptobox&quot;</span></span><br><span class="line">40 / Webdav</span><br><span class="line">   \ <span class="string">&quot;webdav&quot;</span></span><br><span class="line">41 / Yandex Disk</span><br><span class="line">   \ <span class="string">&quot;yandex&quot;</span></span><br><span class="line">42 / Zoho</span><br><span class="line">   \ <span class="string">&quot;zoho&quot;</span></span><br><span class="line">43 / http Connection</span><br><span class="line">   \ <span class="string">&quot;http&quot;</span></span><br><span class="line">44 / premiumize.me</span><br><span class="line">   \ <span class="string">&quot;premiumizeme&quot;</span></span><br><span class="line">45 / seafile</span><br><span class="line">   \ <span class="string">&quot;seafile&quot;</span></span><br><span class="line">Storage&gt;27</span><br><span class="line"><span class="comment">#这里选27Microsoft OneDrive 回车</span></span><br><span class="line"></span><br><span class="line">Option client_id.</span><br><span class="line">OAuth Client Id.</span><br><span class="line">Leave blank normally.</span><br><span class="line">Enter a string value. Press Enter <span class="keyword">for</span> the default (<span class="string">&quot;&quot;</span>).</span><br><span class="line">client_id&gt;</span><br><span class="line"><span class="comment">#这里不填，直接回车</span></span><br><span class="line"></span><br><span class="line">OAuth Client Secret.</span><br><span class="line">Leave blank normally.</span><br><span class="line">Enter a string value. Press Enter <span class="keyword">for</span> the default (<span class="string">&quot;&quot;</span>).</span><br><span class="line">client_secret&gt;</span><br><span class="line"><span class="comment">#不填，继续回车</span></span><br><span class="line"></span><br><span class="line">Option region.</span><br><span class="line">Choose national cloud region <span class="keyword">for</span> OneDrive.</span><br><span class="line">Enter a string value. Press Enter <span class="keyword">for</span> the default (<span class="string">&quot;global&quot;</span>).</span><br><span class="line">Choose a number from below, or <span class="built_in">type</span> <span class="keyword">in</span> your own value.</span><br><span class="line"> 1 / Microsoft Cloud Global</span><br><span class="line">   \ <span class="string">&quot;global&quot;</span></span><br><span class="line"> 2 / Microsoft Cloud <span class="keyword">for</span> US Government</span><br><span class="line">   \ <span class="string">&quot;us&quot;</span></span><br><span class="line"> 3 / Microsoft Cloud Germany</span><br><span class="line">   \ <span class="string">&quot;de&quot;</span></span><br><span class="line"> 4 / Azure and Office 365 operated by 21Vianet <span class="keyword">in</span> China</span><br><span class="line">   \ <span class="string">&quot;cn&quot;</span></span><br><span class="line">region&gt;1</span><br><span class="line"><span class="comment">#选序号1 global全球</span></span><br><span class="line"></span><br><span class="line">Edit advanced config?</span><br><span class="line">y) Yes</span><br><span class="line">n) No (default)</span><br><span class="line">y/n&gt;n</span><br><span class="line"><span class="comment">#不进行高级配置，选择no默认配置即可</span></span><br><span class="line"></span><br><span class="line">Use auto config?</span><br><span class="line"> * Say Y <span class="keyword">if</span> not sure</span><br><span class="line"> * Say N <span class="keyword">if</span> you are working on a remote or headless machine</span><br><span class="line"></span><br><span class="line">y) Yes (default)</span><br><span class="line">n) No</span><br><span class="line">y/n&gt;y</span><br><span class="line"><span class="comment">#继续默认配置</span></span><br><span class="line"></span><br><span class="line">2022/01/14 05:01:39 NOTICE: If your browser doesn<span class="string">&#x27;t open automatically go to the following link: http://127.0.0.1:53682/auth?state=rI*wUG***1J*nGr*L**S*w</span></span><br><span class="line"><span class="string">2022/01/14 05:01:39 NOTICE: Log in and authorize rclone for access</span></span><br><span class="line"><span class="string">2022/01/14 05:01:39 NOTICE: Waiting for code...</span></span><br><span class="line"><span class="string">2022/01/14 05:01:44 NOTICE: Got code</span></span><br><span class="line"><span class="string">#到这里会跳转到浏览器，或者手动复制链接到浏览器登入，登入完成会在浏览器显示</span></span><br><span class="line"><span class="string">#Success!</span></span><br><span class="line"><span class="string">#All done. Please go back to rclone.</span></span><br><span class="line"><span class="string">#再返回终端</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Option config_type.</span></span><br><span class="line"><span class="string">Type of connection</span></span><br><span class="line"><span class="string">Enter a string value. Press Enter for the default (&quot;onedrive&quot;).</span></span><br><span class="line"><span class="string">Choose a number from below, or type in an existing value.</span></span><br><span class="line"><span class="string"> 1 / OneDrive Personal or Business</span></span><br><span class="line"><span class="string">   \ &quot;onedrive&quot;</span></span><br><span class="line"><span class="string"> 2 / Root Sharepoint site</span></span><br><span class="line"><span class="string">   \ &quot;sharepoint&quot;</span></span><br><span class="line"><span class="string">   / Sharepoint site name or URL</span></span><br><span class="line"><span class="string"> 3 | E.g. mysite or https://contoso.sharepoint.com/sites/mysite</span></span><br><span class="line"><span class="string">   \ &quot;url&quot;</span></span><br><span class="line"><span class="string"> 4 / Search for a Sharepoint site</span></span><br><span class="line"><span class="string">   \ &quot;search&quot;</span></span><br><span class="line"><span class="string"> 5 / Type in driveID (advanced)</span></span><br><span class="line"><span class="string">   \ &quot;driveid&quot;</span></span><br><span class="line"><span class="string"> 6 / Type in SiteID (advanced)</span></span><br><span class="line"><span class="string">   \ &quot;siteid&quot;</span></span><br><span class="line"><span class="string">   / Sharepoint server-relative path (advanced)</span></span><br><span class="line"><span class="string"> 7 | E.g. /teams/hr</span></span><br><span class="line"><span class="string">   \ &quot;path&quot;</span></span><br><span class="line"><span class="string">config_type&gt;1</span></span><br><span class="line"><span class="string">#选择序号1</span></span><br><span class="line"><span class="string">Drive OK?</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Found drive &quot;root&quot; of type &quot;business&quot;</span></span><br><span class="line"><span class="string">URL: https://ssxx-my.sharepoint.com/personal/yist_od_yam_ink/Documents</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">y) Yes (default)</span></span><br><span class="line"><span class="string">n) No</span></span><br><span class="line"><span class="string">y/n&gt;y</span></span><br><span class="line"><span class="string">#y 默认</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">--------------------</span></span><br><span class="line"><span class="string">[1]</span></span><br><span class="line"><span class="string">type = onedrive</span></span><br><span class="line"><span class="string">token = &#123;&quot;access_token&quot;:&quot;*************&quot;,&quot;expiry&quot;:&quot;2022-01-14T00:08:19.327666693Z&quot;&#125;</span></span><br><span class="line"><span class="string">drive_id = b!x**qko**ek-h*KRj*5*bV*D*W0mZ9*ZHq*K94i*jT**ZU*z*S*E*TaIDN**G3**a</span></span><br><span class="line"><span class="string">drive_type = business</span></span><br><span class="line"><span class="string">--------------------</span></span><br><span class="line"><span class="string">y) Yes this is OK (default)</span></span><br><span class="line"><span class="string">e) Edit this remote</span></span><br><span class="line"><span class="string">d) Delete this remote</span></span><br><span class="line"><span class="string">y/e/d&gt;</span></span><br><span class="line"><span class="string">#y 默认</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Current remotes:</span></span><br><span class="line"><span class="string">Name                 Type</span></span><br><span class="line"><span class="string">====                 ====</span></span><br><span class="line"><span class="string">Microsoft OneDrive   onedrive</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">e) Edit existing remote</span></span><br><span class="line"><span class="string">n) New remote</span></span><br><span class="line"><span class="string">d) Delete remote</span></span><br><span class="line"><span class="string">r) Rename remote</span></span><br><span class="line"><span class="string">c) Copy remote</span></span><br><span class="line"><span class="string">s) Set configuration password</span></span><br><span class="line"><span class="string">q) Quit config</span></span><br><span class="line"><span class="string">e/n/d/r/c/s/q&gt;q</span></span><br><span class="line"><span class="string">#q 退出</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">rclone mount 这里填写第二步创建名称:/ 这里填写网盘挂载到的文件夹名称 --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --umask 000 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Fatal error: failed to mount FUSE fs: fusermount: signal: bad system call</span></span><br><span class="line"><span class="string">#提示缺少fusermont依赖</span></span><br></pre></td></tr></table></figure><p>点击下载<a href="../../../data/fusermont">Fusermont</a>，解压，拷贝到<br><code>/data/data/com.termux/files/usr/bin/</code><br>文件夹里</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /data/data/com.termux/files/usr/bin/fusermont</span><br><span class="line"></span><br><span class="line">rclone mount Microsoft:/ ./mydir/ --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --<span class="built_in">umask</span> 000 </span><br><span class="line"></span><br><span class="line">加上 --daemon 可以后台静默运行</span><br></pre></td></tr></table></figure><p>查看云盘文件是否出现在文件夹里<code>ls ./mydir</code><br> 这篇记录大致完成了，用aria2下载的文件用mv 移动到挂载到文件夹里等待上传就行了。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在手机里安装alpine做服务器</title>
      <link href="/2022/01/11/alpine/"/>
      <url>/2022/01/11/alpine/</url>
      
        <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>之前一直用Debian系列的服务器，因为习惯了apt软件包管理，之前一直想尝试centos实在用不惯yun以至于用了两年的debian，现在服务器空间越来越吃紧了于是想把系统换成<a href="https://www.alpinelinux.org/">alpine</a></p><h3 id="部署与配置"><a href="#部署与配置" class="headerlink" title="部署与配置"></a>部署与配置</h3><p>先到手机<a href="https://f-droid.org/packages/com.termux/">Termux</a>官网下载软件安装</p><p>打开Termux后替换包源码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s@^\(deb.*stable main\)$@deb https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main@&#x27;</span> <span class="variable">$PREFIX</span>/etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>把软件源换成国内<a href="https://baike.baidu.com/item/%E5%BC%80%E6%BA%90%E9%95%9C%E5%83%8F%E7%AB%99/7395020">清华镜像站</a>这样可以加速安装软件</p><p>无root权限无法使用tsu则不需要安装tsu。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg update</span><br><span class="line">pkg install -y tsu proot wget</span><br></pre></td></tr></table></figure><p>有没有root权限其实相差并不大，只不过安卓10开始WEB服务的默认80端口无法开启，要么修改端口为1024以上，要么启用root权限进行服务。</p><p>接下来在home目录里创建一个文件夹用于存放<a href="https://baike.baidu.com/item/%E6%B2%99%E7%9B%92/3769297">沙盒系统</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mkdir rootfs &amp;&amp; <span class="built_in">cd</span> rootfs</span><br><span class="line"></span><br><span class="line"><span class="comment">#这里的root是文件夹名称，随意定义</span></span><br><span class="line"></span><br><span class="line">curl -<span class="comment"># -O https://mirrors.tuna.tsinghua.edu.cn/lxc-images/images/alpine/3.15/arm64/default/20220110_13%3A00/rootfs.tar.xz</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#这边直接用Termux自带的curl缓存rootfs压缩文件</span></span><br><span class="line"><span class="comment">#用浏览器打开mirrors.tuna.tsinghua.edu.cn/lxc-images/images选择其它系统文件</span></span><br><span class="line"></span><br><span class="line">tar xpf rootfs.tar.xz <span class="comment">#解压文件</span></span><br></pre></td></tr></table></figure><p>用 <code>ls</code> 查看有如下文件夹</p><p><code>bin  etc   lib    mnt  proc  run   srv  tmp  var dev  home  media  opt  root  sbin  sys  usr</code><br>接下来就是用脚本引用启动这个沙盒了，都知道除了 <code>proot</code> 还有个 <code>chroot</code> 为什么只用 <code>proot</code> 呢<br>原因其实很简单 <code>chroot</code> 需要用Root权限，很多人手机都没有所以劝退🙄</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/data/data/com.termux/files/usr/bin/bash </span></span><br><span class="line">user=<span class="string">&quot;root&quot;</span></span><br><span class="line">f=<span class="string">&quot;rootfsfs&quot;</span></span><br><span class="line">h=<span class="string">&quot;/root&quot;</span></span><br><span class="line"><span class="built_in">unset</span> LD_PRELOAD</span><br><span class="line">c=<span class="string">&quot;proot&quot;</span></span><br><span class="line">c+=<span class="string">&quot; --link2symlink&quot;</span></span><br><span class="line">c+=<span class="string">&quot; -0&quot;</span></span><br><span class="line">c+=<span class="string">&quot; -r  <span class="variable">$f</span>&quot;</span></span><br><span class="line">c+=<span class="string">&quot; -b /dev&quot;</span></span><br><span class="line">c+=<span class="string">&quot; -b /proc&quot;</span></span><br><span class="line">c+=<span class="string">&quot; -b  $f<span class="variable">$h</span>:/dev/shm&quot;</span></span><br><span class="line"><span class="comment">#您可以在此处修改挂载目录</span></span><br><span class="line">c+=<span class="string">&quot; -b /sdcard/:/mnt/sdcard/&quot;</span></span><br><span class="line"></span><br><span class="line">c+=<span class="string">&quot; -w <span class="variable">$h</span>&quot;</span></span><br><span class="line">c+=<span class="string">&quot; /usr/bin/env -i&quot;</span></span><br><span class="line">c+=<span class="string">&quot; HOME=<span class="variable">$h</span>&quot;</span></span><br><span class="line">c+=<span class="string">&quot; PATH=/usr/local/sbin:/usr/local/bin:/bin:/usr/bin:/sbin:/usr/sbin:/usr/games:/usr/local/games&quot;</span></span><br><span class="line">c+=<span class="string">&quot; TERM=xterm-256color&quot;</span></span><br><span class="line"><span class="comment">#c+=&quot; LANG=zh_CN.UTF-8&quot;</span></span><br><span class="line">c+=<span class="string">&quot; /bin/ash --login&quot;</span></span><br><span class="line">com=<span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$1</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">exec</span> <span class="variable">$c</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="variable">$c</span> -c <span class="string">&quot;<span class="variable">$c</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>将脚本写入<code>alpine.sh</code>文件里</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x alpine.sh</span><br><span class="line">bash alpine.sh</span><br></pre></td></tr></table></figure><p>如果有Root权限的直接输入<code>tsu</code>再执行<code>bash alpine.sh</code></p><p>接下来我们就可以进入刚刚安装好的系统里<br>虽然已经安装好了，但是没办法联网安装软件，还要配置一些文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /etc/resolv.conf</span><br><span class="line">touch /etc/resolv.conf </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;nameserver 0.0.8.8</span></span><br><span class="line"><span class="string">nameserver 8.8.8.8&quot;</span> &gt;/etc/resolv.conf</span><br><span class="line"><span class="comment">#这时候可以联网，但官方软件地址速度很慢，所以继续换源</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&#x27;s/dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn/g&#x27;</span> /etc/apk/repositories</span><br><span class="line"><span class="comment">#把dl-cdn.alpinelinux.org替换成mirrors.tuna.tsinghua.edu.cn</span></span><br><span class="line"></span><br><span class="line">apk update</span><br><span class="line">apk upgrade </span><br><span class="line">apk add wget vim</span><br></pre></td></tr></table></figure><p>安装<code>Apache2 PHP</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">apk add php-apache2 php-pdo php-mbstring php-gd php-dom php-pear php-pdo_mysql php-session php-simplexml php-gmp php-sockets php-json php-gettext php-iconv php-ctype php-curl php-exif php-ftp php-fileinfo php-intl php-ldap php-mysqli php-zip php-bz2</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;LoadModule php7_module modules/mod_php7.so</span></span><br><span class="line"><span class="string">LoadModule rewrite_module modules/mod_rewrite.so&quot;</span> &gt;&gt; /etc/apache2/httpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果不是用tsu启动的还要再修改一下端口</span></span><br><span class="line">sed -i <span class="string">&#x27;s/Listen 80/Listen 8080/g&#x27;</span> /etc/apache2/httpd.conf</span><br></pre></td></tr></table></figure><p>现在可以启动服务<code>rc-service apache2 start</code>很不幸回车后警告服务运行中，这时你打开浏览器<a href="127.0.0.1">localhost</a>发现服务没运行啊？所以得重载一下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rc-status</span><br><span class="line">touch /run/openrc/softlevel</span><br></pre></td></tr></table></figure><p>启动服务<code>rc-service apache2 start</code>现在可以了<br><a href="127.0.0.1">localhost</a><br><a href="127.0.0.1:8080">localhost:8080</a><br>这时打开链接就可以看到成果了</p><p>配置PHP上传文件的大小限制</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/php7/php.ini</span><br><span class="line"></span><br><span class="line">post_max_size = 2M Post最大限制</span><br><span class="line">upload_max_filesize = 2M 上传文件的最大限制</span><br><span class="line">max_file_uploads = 20 最大并发上传数量</span><br></pre></td></tr></table></figure><p>当然了有些项目要用到数据库<code>Mysql</code>or<code>Mariadb</code>所以我们还要安装一个<code>Mysql</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">apk add mysql mysql-client</span><br><span class="line"></span><br><span class="line">passwd root <span class="comment">#修改一下登入密码</span></span><br><span class="line"></span><br><span class="line">rc-service mariadb start</span><br><span class="line"></span><br><span class="line">mysql_secure_installation <span class="comment">#初始化数据库</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span><br><span class="line">SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line">注意:运行这个脚本的所有部分是所有MariaDB推荐</span><br><span class="line">服务器在生产使用!请仔细阅读每一步!</span><br><span class="line"></span><br><span class="line">In order to log into MariaDB to secure it, we&#x27;ll need the current</span><br><span class="line">password for the root user. If you&#x27;ve just installed MariaDB, and</span><br><span class="line">haven&#x27;t set the root password yet, you should just press enter here.</span><br><span class="line">为了登录MariaDB安全,我们需要的登入</span><br><span class="line">根用户密码。如果你刚刚安装MariaDB,</span><br><span class="line">还没有设置root密码,你应该在这里按回车。</span><br><span class="line"></span><br><span class="line">Enter current password for root (enter for none):</span><br><span class="line">输入当前密码为根(没有设置按回车): ***</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Setting the root password or using the unix_socket ensures that nobody</span><br><span class="line">can log into the MariaDB root user without the proper authorisation.</span><br><span class="line">设置root密码或使用unix_socket确保没人</span><br><span class="line">可以登录到MariaDB根用户没有适当的授权。</span><br><span class="line"></span><br><span class="line">You already have your root account protected, so you can safely answer &#x27;n&#x27;.</span><br><span class="line">你已经有根帐户保护,所以你可以放心地回答“n”。</span><br><span class="line"></span><br><span class="line">Switch to unix_socket authentication [Y/n]</span><br><span class="line">切换到unix_socket认证[是/否]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">You already have your root account protected, so you can safely answer &#x27;n&#x27;.</span><br><span class="line">你已经有根帐户保护,所以你可以放心地回答“n”。</span><br><span class="line"></span><br><span class="line">Change the root password? [Y/n]</span><br><span class="line">改变根密码?[是/否]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">By default, a MariaDB installation has an anonymous user, allowing anyone</span><br><span class="line">to log into MariaDB without having to have a user account created for</span><br><span class="line">them.  This is intended only for testing, and to make the installation</span><br><span class="line">go a bit smoother.  You should remove them before moving into a</span><br><span class="line">production environment.</span><br><span class="line">默认情况下,MariaDB安装有一个匿名用户,允许任何人</span><br><span class="line">登录MariaDB而无需创建用户帐户</span><br><span class="line">他们。这个目的是只用于测试,安装</span><br><span class="line">去更平缓一些。你应该进入前删除它们</span><br><span class="line">生产环境。</span><br><span class="line"></span><br><span class="line">Remove anonymous users?[Y/n]</span><br><span class="line">删除匿名用户?[是/否]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Normally, root should only be allowed to connect from &#x27;localhost&#x27;.  This</span><br><span class="line">ensures that someone cannot guess at the root password from the network.</span><br><span class="line">正常情况下,Root用户只允许连接“本地localhost”。这</span><br><span class="line">确保坏人不能猜测网络的root密码。</span><br><span class="line"></span><br><span class="line">Disallow root login remotely? [Y/n]</span><br><span class="line">不允许远程root登录吗?[是/否]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">By default, MariaDB comes with a database named &#x27;test&#x27; that anyone can</span><br><span class="line">access.  This is also intended only for testing, and should be removed</span><br><span class="line">before moving into a production environment.</span><br><span class="line">默认情况下,MariaDB附带了一个名为“测试”的数据库,任何人都可以，访问。这也是只有测试,并且应该被删除，之前移动到生产环境中。</span><br><span class="line"></span><br><span class="line">Remove test database and access to it? [Y/n]</span><br><span class="line">删除测试数据库和访问吗?[是/否]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Reloading the privilege tables will ensure that all changes made so far</span><br><span class="line">will take effect immediately.</span><br><span class="line">重新加载权限表将确保所有到目前为止所做的更改将立即生效。</span><br><span class="line"></span><br><span class="line">Reload privilege tables now? [Y/n]</span><br><span class="line">现在重新加载权限表吗?[是/否]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Cleaning up...</span><br><span class="line">清理....</span><br><span class="line"></span><br><span class="line">All done!  If you&#x27;ve completed all of the above steps, your MariaDB</span><br><span class="line">installation should now be secure.</span><br><span class="line">全部完成!如果你已经完成了以上步骤,MariaDB安装现在应该安全。</span><br><span class="line"></span><br><span class="line">Thanks for using MariaDB!</span><br><span class="line">感谢使用MariaDB!</span><br></pre></td></tr></table></figure><p>根据提示进行设置，完成后接下去创建数据库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line"><span class="comment">#输入密码或者回车登入</span></span><br><span class="line"></span><br><span class="line">create database name ;</span><br><span class="line"><span class="comment">#创建数据库</span></span><br><span class="line">drop database name;</span><br><span class="line"><span class="comment">#删除数据库</span></span><br><span class="line"><span class="comment">#show databases;</span></span><br><span class="line">列出所有数据库</span><br><span class="line"></span><br><span class="line">mysqldump -u 用户名 -p 数据库名 &gt; 数据库文件名.sql</span><br><span class="line"><span class="comment">#导出数据库</span></span><br><span class="line"></span><br><span class="line">mysql -u用户名 -p 数据库名 &lt; 数据库文件名.sql</span><br><span class="line"><span class="comment">#导入数据库</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>链接获取QQ头像</title>
      <link href="/2021/04/16/qq/"/>
      <url>/2021/04/16/qq/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://q1.qlogo.cn/g?b=qq&amp;nk=QQ号&amp;s=640</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蓝奏云的变相用法</title>
      <link href="/2021/03/14/lanzouyun/"/>
      <url>/2021/03/14/lanzouyun/</url>
      
        <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>蓝奏云是一个提供云存储服务的平台，功能上类似于百度网盘、腾讯微云等产品。该网盘最大的特点，就是不会对免费用户进行上传下载限速，所以广受用户好评。蓝奏云主要靠广告来盈利，在它的文件分享页面，会有一些广告展示。普通用户只能上传100M以内的文件，蓝奏云以最低的成本满足了最多的用户!现在我们来谈谈怎么变相上传超过100M的文件!没有使用破解的方法进行变相上传。</p><h3 id="认识"><a href="#认识" class="headerlink" title="认识"></a>认识</h3><p>既然上面说了大小是主要问题所以我们得了解什么压缩方式是最暴力的，zip? 7z?其实都不是，我们要用tar和xz，是不是很少听说，又或者没有听说过?tar压缩用来打包文件夹，因为xz只能用来压缩一个文件，而不能压缩文件夹</p><h3 id="使用tar"><a href="#使用tar" class="headerlink" title="使用tar"></a>使用tar</h3><p>打开termux软件直接输入tar，xz就可以直接使用，一般Linux都会自带上这些工具，可以说在Linux最常用的打包方式了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">termux-setup-storage <span class="comment">#获取读写/sdcard/的权限</span></span><br><span class="line"><span class="built_in">cd</span> /sdcard/Download/ <span class="comment">#进入你的工作目录，我一般在Download目录</span></span><br><span class="line"></span><br><span class="line">tar cpvf file.tar files <span class="comment">#c表示添加新的 p保持权限所有 v表示显示过程</span></span><br><span class="line">f表示指定的备份文件 后面跟随压缩包名称 再后面就是文件需要打包的目录或者文件</span><br></pre></td></tr></table></figure><h3 id="使用xz"><a href="#使用xz" class="headerlink" title="使用xz"></a>使用xz</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xz -z -v -9 tar压缩包名字</span><br><span class="line">z表示创建xz压缩 -v同上 -9表示压缩率 0-9可选</span><br></pre></td></tr></table></figure><p>得到一个{name}.tar.xz 的文件，如果压缩完的文件还是100M以上那怎么办?<br>不还是不能上传到蓝奏云呀？如果我说把一个压缩包分类切割为两个呢?200m不就变成两个100m啦？什么?你说两个还是太大?那就按大小分割不就成啦？使用<code>split</code>指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">split -b 100m 压缩包名字 </span><br></pre></td></tr></table></figure><p>-b表示按照字节切割千万记得100后面一定要跟随单位否则会以100b切割一个文件，那么100m就会分割成1024x100=102400个文件，这时你的设备可能出现不良反应🌚</p><h3 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h3><p>切割完后会有xxa xxb xxc 这些文件你可以给他们改个名字，比如 xxa改成1 xxb改成2….但是xxa改成2 xxb千万别改成1 不然合并包的时候顺序乱了就无法进行解压啦，这点很重要！</p><p>蓝奏云支持的后缀zip 记得给分裂的文件添加一个后缀.zip比如xxa改成 file1.zip xxb=file2.zip xxc=file3…..<br>到蓝奏云创建一个文件夹，进入文件夹上传文件</p><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>点蓝奏云目录的分享链接，复制到新的窗口打开，依次下载里面所有的文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find /sdcard/ -name file*zip |xargs -i cat &#123;&#125; &gt; name.tar.xz</span><br><span class="line">find /sdcard/ -name name.tar.xz |xarge -i tar xpf &#123;&#125;</span><br></pre></td></tr></table></figure><p>find 是Linux的搜索工具 指定/sdcard文件夹下面的所有文件夹内搜索 按照名字file*.zip搜索 <em>号表示所有  用法比较多比如你有个文件夹叫afjvkrkckr，你要进入只能一个一个字母打?当然不! 你可以 cd a</em>r 这样 也可以 cd af* 这个符号可以代替所有xargs -i 表示输出搜索到的名字 cat打印{搜索到的名字文件}到name.tar.xz这个文件里<br>下面一条就是解压搜索到的名字</p><p>自此本教程就结束啦!</p><h3 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h3><p>本文用到<code>tar xz cat find xargs split</code>这些工具，都是Linux常用的工具</p>]]></content>
      
      
      
        <tags>
            
            <tag> Termux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何使用终端卸载系统自带的软件？</title>
      <link href="/2021/03/13/termuxpm/"/>
      <url>/2021/03/13/termuxpm/</url>
      
        <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>手机官方系统自带的软件很多，你用不到的也很多，放在一边吧还给你推送广告😓，干脆把它卸载了呗!百度上可以找到很多的卸载自带软件的APP，为了卸载软件去下载一个广告更多的软件划不来呀，所以今天还是用万能的工具箱<code>Termux</code>有无<code>Root</code>都可以使用，只不过没有root权限会麻烦一些罢了。</p><h3 id="无Root权限卸载"><a href="#无Root权限卸载" class="headerlink" title="无Root权限卸载"></a>无Root权限卸载</h3><p>在没有root权限的情况下可以使用<a href="https://jingyan.baidu.com/article/ce4366494962083773afd3d0.html">Adb</a>工具<br>克隆这个仓库的文件，这是Magisk的adb包可以直接使用这个</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Magisk-Modules-Repo/adb-ndk.git </span><br><span class="line"><span class="built_in">cd</span> adb-ndk/bin</span><br><span class="line">chmod +x *</span><br><span class="line">mv * <span class="variable">$PREFIX</span>/bin/</span><br></pre></td></tr></table></figure><p>首先在Android系统开发者模式里面开启“无线调试”点击进去可以看到IP地址和端口，记住这个到终端执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb connect ip:prot <span class="comment">#连接网络设备</span></span><br><span class="line">adb devices <span class="comment">#可以看到有一个设备显示啦</span></span><br><span class="line">adb shell pm uninstall --user 0 apk-name</span><br><span class="line">Success <span class="comment">#出现这个时表示成功</span></span><br></pre></td></tr></table></figure><h3 id="Root卸载"><a href="#Root卸载" class="headerlink" title="Root卸载"></a>Root卸载</h3><p>如果有root那就方便了很多，不需要使用adb工具</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su  <span class="comment">#切换到root</span></span><br><span class="line">pm uninstall --user 0 apk-name</span><br><span class="line">Success <span class="comment">#出现这个时表示成功</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
